# L10 多因子策略 - 高信息比率优化版

> 基于机器学习的多因子量化投资策略，专注于相对基准ETF的超额收益，**目标信息比率>0.5**

## 📚 文档导航

- **[快速开始 →](QUICK_START.md)** - 5分钟上手指南
- **[聚宽平台指南 →](JOINQUANT_GUIDE.md)** - 详细使用说明和常见问题
- **[改进对比 →](COMPARISON.md)** - 查看改进前后的详细对比
- **[实施总结 →](IMPLEMENTATION_SUMMARY.md)** - 技术实现细节和质量保证

## 📊 项目概述

本项目实现了一个基于多因子模型的量化投资策略，**目标是实现信息比率>0.5**。核心策略：预测超额收益（相对标准ETF基准）并通过激进的特征选择和非线性建模提升预测能力。

## 主要改进（针对信息比率>0.5）

相比原始版本，改进版策略包含以下优化：

### 1. 扩展因子池
- **5个因子类别**：risk, basics, quality, growth, momentum（vs 原2个）
- **更全面的信息**：覆盖风险、基本面、质量、成长和动量等多个维度
- **提升预测能力**：更丰富的因子提供更强的预测信号

### 2. 极度特征选择
- **Top 20%因子**：只选择相关性前20%的因子（vs 原30%）
- **降噪最大化**：极度激进的选择策略，只保留最强信号
- **防止过拟合**：最小特征集确保模型泛化能力

### 3. 增强非线性建模
- **Top-5因子交互**：添加相关性前5个因子的交互项（vs 原3个）
- **Top-3因子平方**：添加前3个因子的平方项，捕捉非线性效应
- **更强拟合能力**：通过非线性变换提升模型表达能力

### 4. 超参数精细调优
- **更小正则化**：alpha范围0.0001-0.001（vs 原0.0005-0.005）
- **更多候选**：10个模型配置（vs 原8个）
- **更好拟合**：允许模型更充分学习训练数据的模式

### 5. 超集中持仓
- **30只股票**：进一步减少持仓（vs 原40只）
- **提高主动度**：更集中的持仓带来更高的主动管理效果
- **放大α**：集中投资高确信度股票以获取更高超额收益

### 6. 超额收益优化
- **目标变量**：预测相对基准ETF（512100.XSHG）的超额收益
- **信息比率优化**：直接优化超额收益的风险调整指标
- **基准对齐**：训练和预测都以标准ETF收益为基准

### 7. 训练数据管理
- **时间验证**：确保训练数据严格在start_date之前
- **数据清洗**：去除ST股票、停牌股票和缺失数据
- **标准化处理**：对因子进行标准化和异常值处理

## 📁 文件说明

### 核心文件
- **`L10_improved_strategy.py`** - Python脚本版本，可直接运行
- **`L10_improved_strategy.ipynb`** - Jupyter Notebook版本（**推荐在聚宽平台使用**）

### 文档文件
- **`QUICK_START.md`** - 5分钟快速上手指南 ⭐
- **`JOINQUANT_GUIDE.md`** - 聚宽平台详细使用指南
- **`COMPARISON.md`** - 原版vs改进版详细对比
- **`IMPLEMENTATION_SUMMARY.md`** - 技术实现总结

### 原始文件
- `L10_多因子策略_比赛.html` - 原始策略HTML文档

## 🚀 使用方法

### 在聚宽平台运行

1. 将 `L10_improved_strategy.ipynb` 上传到聚宽研究环境
2. 按顺序运行所有单元格
3. 查看输出的性能指标和图表

> 💡 **提示**：详细的使用说明请参考 [JOINQUANT_GUIDE.md](JOINQUANT_GUIDE.md)

### ⚙️ 配置参数

可以修改以下参数来调整策略：

```python
start_date = datetime.date(2020, 1, 1)  # 回测开始日期
end_date = datetime.date(2025, 12, 15)  # 回测结束日期
investment_horizon = 'M'  # 调仓频率：'M'月度，'W'周度，'d'日度
number_of_periods_per_year = 12  # 对应调仓频率的年化周期数
optimal_stock_count = 30  # 选择的股票数量（高度集中）
```

## 策略说明

### 因子来源
- 使用聚宽因子库中的 `risk` 和 `basics` 类别因子
- 自动获取所有可用因子

### 股票池
- 中证1000指数成分股（代码：000852.XSHG）
- 排除ST股票和停牌股票

### 选股逻辑
1. 使用训练好的模型预测每只股票的收益率
2. 选择预测收益率最高的N只股票（默认50只）
3. 采用等权重配置

### 交易成本
- 考虑双边0.1%的交易成本（单边0.001）
- 在计算持有期回报时扣除

## 性能指标

策略输出以下性能指标：

- **策略夏普比率**：衡量策略的风险调整后收益
- **基准ETF夏普比率**：中证1000 ETF的夏普比率
- **信息比率**：策略相对基准的超额收益风险调整比率

信息比率 = 超额收益均值 / 超额收益标准差

## 关键约束

1. **不可修改函数签名**：`cal_portfolio_weight_series(decision_date, old_portfolio_weight_series)` 的签名不能改变
2. **训练数据时间**：训练数据必须在start_date之前
3. **输出格式**：保持与原版本相同的输出格式
4. **平台兼容**：代码可在聚宽平台运行

## 预期效果

通过特征选择和模型优化，预期可以实现：

- ✅ 正的信息比率
- ✅ 高于基准的夏普比率
- ✅ 稳定的超额收益
- ✅ 较低的回撤

## 注意事项

1. 首次运行会删除旧的simulation文件，确保从头开始
2. 训练过程可能需要较长时间（取决于数据量）
3. 如果修改了模型或参数，建议删除simulation文件重新运行
4. 交叉验证过程可能显示一些警告，这是正常现象

## 进一步优化建议

如需进一步提升策略表现，可以考虑：

1. **增加更多因子**：尝试使用其他类别的因子
2. **动态股票数量**：根据市场环境动态调整选股数量
3. **加权方式**：尝试按预测收益加权而非等权
4. **集成学习**：使用RandomForest或GradientBoosting等集成方法
5. **时间序列特征**：添加动量、波动率等时间序列特征
6. **市场中性**：考虑行业中性或市值中性约束

## 技术支持

如有问题，请检查：
1. 聚宽平台是否有因子数据访问权限
2. 日期范围是否在数据可用范围内
3. Python环境是否包含所需的sklearn库

## 更新日志

### v1.0 (2025-12-26)
- 初始版本
- 实现特征选择
- 实现多模型比较
- 实现交叉验证
- 添加自动化测试和性能报告
